"use strict";(self.webpackChunksession=self.webpackChunksession||[]).push([[625],{7625:function(t,e,s){s.r(e),s.d(e,{default:function(){return h}});var r=s(4165),c=s(5861),n=s(9439),a=s(2791),o={counter:"Cart_counter__DzerL",removeBtn:"Cart_removeBtn__Ei0Ru"},d=s(9190),i=s(5218),l=s(6536),u=s(1087),p=s(4270),m=s(184);function h(){var t=(0,a.useContext)(d.o),e=t.getLoggedUserCart,s=t.removeItem,h=t.updateProductCount,x=t.setCounter,f=t.decrement,j=(0,a.useState)(null),b=(0,n.Z)(j,2),v=b[0],N=b[1];function w(){return(w=(0,c.Z)((0,r.Z)().mark((function t(){var s,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:c=t.sent,localStorage.setItem("cartId",c.data.data._id),"success"===(null===c||void 0===c||null===(s=c.data)||void 0===s?void 0:s.status)&&(N(c.data.data),x(c.data.data.products.length));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(){return(g=(0,c.Z)((0,r.Z)().mark((function t(e){var c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s(e);case 2:c=t.sent,f(),N(c.data.data),i.Am.success("Product Successfuly removed",{duration:3e3,position:"top-right",style:{background:"black",color:"white"}});case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(t,e){return k.apply(this,arguments)}function k(){return(k=(0,c.Z)((0,r.Z)().mark((function t(e,s){var c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(e,s);case 2:c=t.sent,N(c.data.data),i.Am.success("Product count updated Successfuly ",{duration:3e3,position:"top-right",style:{background:"black",color:"white"}});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,a.useEffect)((function(){!function(){w.apply(this,arguments)}()}),[]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(p.q,{children:[(0,m.jsx)("meta",{charSet:"utf-8"}),(0,m.jsx)("title",{children:"Shopping Cart"})]}),null!==v?(0,m.jsxs)("div",{className:"container  p-4 ",children:[(0,m.jsx)("h3",{children:"Cart "}),v.products.map((function(t,e){return(0,m.jsxs)("div",{className:"row  align-items-center border-bottom py-2",children:[(0,m.jsx)("div",{className:"col-2",children:(0,m.jsx)(u.rU,{to:"/product-details/".concat(t.product._id),children:(0,m.jsx)("img",{src:t.product.imageCover,className:"w-100  rounded-2",alt:t.product.title})},t.product._id)}),(0,m.jsxs)("div",{className:"col-10  row px-2",children:[(0,m.jsxs)("div",{className:"col-10  pt-2",children:[(0,m.jsxs)(u.rU,{to:"/product-details/".concat(t.product._id),children:[(0,m.jsx)("h6",{className:"h6  fw-bold",children:t.product.title}),null!=t.product.brand?(0,m.jsx)("h6",{className:"mb-3  text-muted",children:t.product.brand.name}):(0,m.jsx)("h6",{className:"mb-3  text-muted"})]},t.product._id),(0,m.jsxs)("div",{className:"d-flex justify-content-start align-items-center mb-3",children:[(0,m.jsxs)("div",{className:"".concat(o.counter," rounded-pill py-0 border me-3"),children:[(0,m.jsx)("button",{onClick:function(){return y(t.product._id,t.count-1)},className:"btn rounded-0 fw-bold border-0 btn-sm",children:(0,m.jsx)("i",{className:"fa-solid fa-minus"})}),(0,m.jsx)("span",{className:"mx-2 fw-bold",children:t.count}),(0,m.jsx)("button",{onClick:function(){return y(t.product._id,t.count+1)},className:"btn rounded-0 fw-bold border-0  btn-sm",children:(0,m.jsx)("i",{className:"fa-solid fa-plus"})})]}),(0,m.jsxs)("button",{onClick:function(){return function(t){return g.apply(this,arguments)}(t.product._id)},className:"".concat(o.removeBtn," btn  p-2 px-3 rounded-circle border"),children:[(0,m.jsx)("i",{className:"fa-regular  fa-trash-can"})," "]})]})]}),(0,m.jsx)("div",{className:"text-center col-2 pt-2",children:(0,m.jsx)(u.rU,{to:"/product-details/".concat(t.product._id),children:(0,m.jsxs)("h6",{className:"fw-bold",children:["EGP ",t.price.toLocaleString()]})},t.product._id)})]})]},e)})),(0,m.jsxs)("div",{className:"row w-100 d-flex justify-content-between align-items-center py-2",children:[(0,m.jsx)("div",{className:"col-md-8 ",children:(0,m.jsxs)("h6",{className:"h3 ps-3 py-3 fw-bold",children:["Subtotal: ",v.totalCartPrice.toLocaleString()," EGP"]})}),(0,m.jsx)("div",{className:"col-md-3 d-flex justify-content-center",children:(0,m.jsx)(u.rU,{to:"/checkout",className:"",children:(0,m.jsx)("button",{className:" bg-prim rounded-pill  p-2 w-auto",children:"Proceed to Checkout"})})})]})]}):(0,m.jsx)(l.default,{})]})}}}]);
//# sourceMappingURL=625.f52ce0d8.chunk.js.map