"use strict";(self.webpackChunksession=self.webpackChunksession||[]).push([[439],{7633:function(e,t,s){s.r(t),s.d(t,{default:function(){return N}});var r=s(4165),n=s(3433),a=s(5861),c=s(9439),i=s(2791),o=s(1243),l=s(7689),d=s(1087),u=s(9190),p=s(5218),m=s(6536),f=s(5320),h=s(5690),x=s(1582),g=s(184),v=s(4270),j=s(7087);s(9713);function N(){var e=(0,l.UO)().id,t=(0,i.useState)(),s=(0,c.Z)(t,2),N=s[0],b=s[1],w=(0,i.useState)(1),y=(0,c.Z)(w,2),Z=y[0],k=y[1],A=(0,i.useState)(),E=(0,c.Z)(A,2),P=E[0],C=(E[1],[]),S=(0,i.useContext)(u.o),R=S.addToCart,T=S.userCart,L=S.baseUrl,D=S.handleBaseUrl,F=S.userWishlist,U=S.addToWishlist,W=S.removeFromWishlist,I=S.removeItem;function O(e){return B.apply(this,arguments)}function B(){return B=(0,a.Z)((0,r.Z)().mark((function t(s){var a,c,i,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.get("".concat(L,"/api/v1/products?page=").concat(s||1)).catch((function(e){console.log("getProducts error",e.message),"ERR_NETWORK"===e.code&&D()}));case 2:return a=t.sent,c=a.data,k(c.metadata.numberOfPages),b(c.data),t.next=8,o.Z.get("".concat(L,"/api/v1/products?page=2")).catch((function(e){console.log("getProducts error",e.message),"ERR_NETWORK"===e.code&&D()}));case 8:i=t.sent,C=[].concat((0,n.Z)(null===c||void 0===c?void 0:c.data),(0,n.Z)(null===i||void 0===i?void 0:i.data.data)),l=C.filter((function(t){var s;return(null===t||void 0===t||null===(s=t.subcategory[0])||void 0===s?void 0:s._id)===e})),b(l),0!==Array.from(l).length?b(l):b(c.data),0!==Array.from(l).length&&(b(l),Array.from(l).length<40?k(1):k(2));case 15:case"end":return t.stop()}}),t)}))),B.apply(this,arguments)}function G(e){var t=null===T||void 0===T?void 0:T.filter((function(t){return t===e}));return(null===t||void 0===t?void 0:t.length)>0}function _(){return(_=(0,a.Z)((0,r.Z)().mark((function e(t){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t);case 2:"success"===(null===(s=e.sent)||void 0===s?void 0:s.data.status)?p.Am.success(s.data.message,{duration:3e3,position:"top-right",style:{background:"black",color:"white"}}):localStorage.getItem("userToken")?p.Am.error("addProduct Error",{duration:3e3}):p.Am.error("Please login first",{duration:3e3});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=(0,a.Z)((0,r.Z)().mark((function e(t){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:"success"===(null===(s=e.sent)||void 0===s?void 0:s.data.status)?p.Am.success("Product removed from cart",{duration:3e3,position:"top-right",style:{background:"black",color:"white"}}):p.Am.error("Error",{duration:3e3});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){var t=null===F||void 0===F?void 0:F.filter((function(t){return t===e}));return(null===t||void 0===t?void 0:t.length)>0}function q(){return(q=(0,a.Z)((0,r.Z)().mark((function e(t){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t);case 2:"success"===(null===(s=e.sent)||void 0===s?void 0:s.data.status)?p.Am.success(s.data.message,{duration:3e3,position:"top-right",style:{background:"black",color:"white"}}):localStorage.getItem("userToken")?p.Am.error("addProduct Error",{duration:3e3}):p.Am.error("Please login first",{duration:3e3});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=(0,a.Z)((0,r.Z)().mark((function e(t){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t);case 2:"success"===(null===(s=e.sent)||void 0===s?void 0:s.data.status)?p.Am.success(s.data.message,{duration:3e3,position:"top-right",style:{background:"black",color:"white"}}):p.Am.error("Error",{duration:3e3});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,i.useEffect)((function(){O()}),[e]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(v.q,{children:[(0,g.jsx)("meta",{charSet:"utf-8"}),(0,g.jsx)("title",{children:"Products"})]}),N?(0,g.jsx)("div",{className:"container py-4 mb-5",children:(0,g.jsxs)("div",{className:"row",children:[N.map((function(e){return(0,g.jsx)("div",{className:"col-md-3 ",children:(0,g.jsxs)("div",{className:"product px-2 py-3 rounded",children:[(0,g.jsxs)(d.rU,{to:"/product-details/"+e.id,children:[(0,g.jsxs)("figure",{className:"position-relative rounded",children:[(0,g.jsx)(j.LazyLoadImage,{effect:"blur",src:e.imageCover,className:"w-100  rounded ",alt:e.category.name}),e.priceAfterDiscount&&e.priceAfterDiscount!==e.price?(0,g.jsx)("span",{className:"sale badge text-bg-danger position-absolute top-0 end-0 rounded",children:"Sale"}):""]}),(0,g.jsx)("p",{className:"text-main  my-0 ",children:e.category.name})]}),(0,g.jsxs)("div",{className:"d-flex justify-content-between",children:[null!=e.brand?(0,g.jsx)("p",{className:"text-primary fs-7",children:e.brand.name}):(0,g.jsx)("p",{className:"text-primary fs-7"}),Q(e.id)?(0,g.jsx)("i",{className:"fa-solid text-danger fa-heart pe-3 cursor-pointer",onClick:function(t){!function(e){z.apply(this,arguments)}(e.id)}}):(0,g.jsx)("i",{className:"fa-regular fa-heart pe-3 cursor-pointer",onClick:function(t){!function(e){q.apply(this,arguments)}(e.id)}})]}),(0,g.jsxs)(d.rU,{to:"/product-details/"+e.id,children:[e.priceAfterDiscount&&e.priceAfterDiscount!==e.price?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("p",{className:"d-flex align-items-center fw-bold mb-0 me-2",children:[(0,g.jsx)("sup",{className:"pt-2",children:"EGP"}),(0,g.jsx)("span",{className:"fs-5 mx-0 px-0",children:e.priceAfterDiscount.toLocaleString()}),(0,g.jsx)("sup",{className:"pt-2",children:"00"})]}),(0,g.jsxs)("p",{className:"text-decoration-line-through text-muted d-flex align-items-center mb-2 p-0 me-2",children:[(0,g.jsx)("sup",{className:"pt-2",children:"EGP"}),(0,g.jsx)("span",{className:"fs-6 mx-0 px-0",children:e.price.toLocaleString()}),(0,g.jsx)("sup",{className:"pt-2",children:"00"})]})]}):(0,g.jsxs)("p",{className:"d-flex align-items-center fw-bold p-0 me-2  pb-3",children:[(0,g.jsx)("sup",{className:"pt-2",children:"EGP"}),(0,g.jsx)("span",{className:"fs-5 mx-0 px-0",children:e.price.toLocaleString()}),(0,g.jsx)("sup",{className:"pt-2",children:"00"})]}),(0,g.jsx)("h3",{className:"h6 text-truncate",children:e.title}),(0,g.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsxs)("span",{className:"ms-2 mt-1 pt-0",children:[" ",(0,g.jsx)(f.Q,{outlined:!0,height:"30",width:"15",rating:e.ratingsAverage})]}),(0,g.jsx)("span",{className:"ms-2 mt-0 pt-0",children:e.ratingsQuantity})]})})]}),G(e.id)?(0,g.jsx)("button",{onClick:function(){return function(e){return K.apply(this,arguments)}(e.id)},className:"btn bg-danger text-white w-100",children:"Remove from cart"}):(0,g.jsx)("button",{onClick:function(){return function(e){return _.apply(this,arguments)}(e.id)},className:"btn bg-main text-white w-100",children:"+ Add to cart"})]})},e.id)})),Z>1?(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("div",{className:"col-12 pt-4 d-flex justify-content-center",children:(0,g.jsx)(x.Z,{spacing:2,children:(0,g.jsx)(h.Z,{count:Z,page:P,onChange:function(e,t){console.log("event",e),console.log("value",t),O(t),window.scrollTo(0,0)},showFirstButton:!0,showLastButton:!0})})})}):""]})}):(0,g.jsx)(m.default,{})]})}}}]);
//# sourceMappingURL=439.fbbe33ac.chunk.js.map