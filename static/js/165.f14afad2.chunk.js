"use strict";(self.webpackChunksession=self.webpackChunksession||[]).push([[165],{1165:function(e,s,a){a.r(s),a.d(s,{default:function(){return h}});var l=a(4165),n=a(5861),r=a(9439),o=a(2791),t=a(9190),d=a(1243),i={width:"MyAddressBook_width__NejDW",blueInput:"MyAddressBook_blueInput__UOy6W",redInput:"MyAddressBook_redInput__cJ3Rl",darkBlueInput:"MyAddressBook_darkBlueInput__f+iVY"},c=a(5218),u=a(5705),m=a(4270),p=a(184);function h(){var e=(0,o.useContext)(t.o),s=e.baseUrl,a=e.handleBaseUrl,h=(0,o.useState)(),f=(0,r.Z)(h,2),v=f[0],x=f[1],b=(0,o.useState)(null),g=(0,r.Z)(b,2),y=g[0],N=g[1],j=(0,o.useState)(!1),k=(0,r.Z)(j,2),w=k[0],B=k[1],Z={token:localStorage.getItem("userToken")},A=(0,u.TA)({initialValues:{name:"",details:"",phone:"",city:""},onSubmit:function(e){!function(e){F.apply(this,arguments)}(e),B(!0)}});function I(){return _.apply(this,arguments)}function _(){return(_=(0,n.Z)((0,l.Z)().mark((function e(){var n,r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.get("".concat(s,"/api/v1/addresses"),{headers:Z}).catch((function(e){console.log("getLoggedUserAddress Error",e.code),"ERR_NETWORK"===e.code&&a(s)}));case 2:n=e.sent,r=n.data,x(r.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=(0,n.Z)((0,l.Z)().mark((function e(s){var a;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.delete("https://ecommerce.routemisr.com/api/v1/addresses/".concat(s),{headers:Z}).catch((function(e){return console.log(e)}));case 2:a=e.sent,console.log("message",a.data.message),I(),c.ZP.success(a.data.message,{duration:3e3,position:"top-right",style:{background:"black",color:"white"}});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=(0,n.Z)((0,l.Z)().mark((function e(n){var r,o;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.post("".concat(s,"/api/v1/addresses"),{name:n.name,details:n.details,phone:n.phone,city:n.city},{headers:Z}).catch((function(e){var l,n,r,o,t;if(console.log("addUserAddress Error",e),"ERR_NETWORK"===e.code&&a(s),400===(null===e||void 0===e||null===(l=e.response)||void 0===l?void 0:l.status))N(null===e||void 0===e||null===(r=e.response)||void 0===r||null===(o=r.data)||void 0===o||null===(t=o.errors)||void 0===t?void 0:t.msg),c.ZP.error(e.response.data.errors.msg,{duration:3e3,position:"top-right",style:{background:"black",color:"white"}});else if(401===(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status)){var d,i;N(null===e||void 0===e||null===(d=e.response)||void 0===d?void 0:d.data.message),c.ZP.error(null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.data.message,{duration:3e3,position:"top-right",style:{background:"black",color:"white"}})}}));case 2:r=e.sent,o=r.message,console.log("message",o),c.ZP.success(o,{duration:3e3,position:"top-right",style:{background:"black",color:"white"}}),I(),B(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,o.useEffect)((function(){I()}),[]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(m.q,{children:[(0,p.jsx)("meta",{charSet:"utf-8"}),(0,p.jsx)("title",{children:"Address book"})]}),(0,p.jsx)("div",{className:"container",children:(0,p.jsxs)("div",{className:"row py-5",children:[(0,p.jsx)("h3",{className:"mb-5",children:"My Address Book"}),(null===v||void 0===v?void 0:v.length)>=1?v.map((function(e,s){return(0,p.jsxs)("div",{className:"row mx-auto mb-5",children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between  mb-3",children:[(0,p.jsxs)("p",{className:"h5 pt-3",children:["Address ",s+1]}),(0,p.jsx)("button",{className:"rounded-pill bg-danger text-white  w-auto",onClick:function(){return function(e){return C.apply(this,arguments)}(e._id)},children:"Remove address"})]}),(0,p.jsxs)("div",{className:"form-group col-md-6",children:[(0,p.jsx)("input",{type:"text",className:"form-control mb-3 py-2 ".concat(i.blueInput," rounded-pill"),disabled:!0,placeholder:"Address Name",id:"addressName",name:"addressName",value:e.name}),(0,p.jsx)("label",{htmlFor:"addressName",className:"fw-semibold rounded",children:"Address Name"})]}),(0,p.jsxs)("div",{className:"form-group  col-md-6",children:[(0,p.jsx)("input",{type:"text",className:"form-control mb-3 py-2 ".concat(i.blueInput,"  rounded-pill"),disabled:!0,placeholder:"details",id:"details",name:"details",value:e.details}),(0,p.jsx)("label",{htmlFor:"details",className:"fw-semibold rounded",children:"Details"})]}),(0,p.jsxs)("div",{className:"form-group  col-md-6",children:[(0,p.jsx)("input",{type:"text",className:"form-control mb-3 py-2 ".concat(i.blueInput,"  rounded-pill"),disabled:!0,placeholder:"city",id:"city",name:"city",value:e.city}),(0,p.jsx)("label",{htmlFor:"city",className:"fw-semibold rounded",children:"City"})]}),(0,p.jsxs)("div",{className:"form-group  col-md-6",children:[(0,p.jsx)("input",{type:"tel",className:"form-control mb-3 py-2 ".concat(i.blueInput,"  rounded-pill"),disabled:!0,placeholder:"phone",id:"phone",name:"phone",value:e.phone}),(0,p.jsx)("label",{htmlFor:"phone",className:"fw-semibold rounded",children:"Phone"})]})]},s)})):(0,p.jsx)("p",{className:"h5 mb-3",children:"user has no registered addresses"}),(0,p.jsx)("form",{onSubmit:A.handleSubmit,children:(0,p.jsxs)("div",{className:"row mx-auto",children:[y?(0,p.jsx)("div",{className:"alert alert-danger",children:y}):"",(0,p.jsxs)("div",{className:"form-group  col-md-6",children:[(0,p.jsx)("input",{type:"text",className:"form-control mb-3 py-2 ".concat(i.darkBlueInput,"  rounded-pill"),placeholder:"Address Name",name:"name",value:A.values.name,onChange:A.handleChange,onBlur:A.handleBlur}),(0,p.jsx)("label",{htmlFor:"name",className:"fw-semibold",children:"Address Name"}),A.errors.name&&A.touched.name?(0,p.jsx)("div",{className:"alert alert-danger",children:A.errors.name}):""]}),(0,p.jsxs)("div",{className:"form-group  col-md-6",children:[(0,p.jsx)("input",{type:"text",className:"form-control mb-3 py-2 ".concat(i.darkBlueInput,"  rounded-pill"),placeholder:"details",id:"details",name:"details",value:A.values.details,onChange:A.handleChange,onBlur:A.handleBlur}),(0,p.jsx)("label",{htmlFor:"details",className:"fw-semibold rounded",children:"Details"})]}),A.errors.details&&A.touched.details?(0,p.jsx)("div",{className:"alert alert-danger",children:A.errors.details}):"",(0,p.jsxs)("div",{className:"form-group  col-md-6",children:[(0,p.jsx)("input",{type:"text",className:"form-control mb-3 py-2 ".concat(i.darkBlueInput,"  rounded-pill"),placeholder:"city",id:"city",name:"city",value:A.values.city,onChange:A.handleChange,onBlur:A.handleBlur}),(0,p.jsx)("label",{htmlFor:"city",className:"fw-semibold rounded",children:"City"})]}),(0,p.jsxs)("div",{className:"form-group  col-md-6",children:[(0,p.jsx)("input",{type:"tel",className:"form-control mb-3 py-2 ".concat(i.darkBlueInput,"  rounded-pill"),placeholder:"phone",name:"phone",value:A.values.phone,onChange:A.handleChange,onBlur:A.handleBlur}),(0,p.jsx)("label",{htmlFor:"phone",className:"fw-semibold rounded ",children:"Phone"})]}),(0,p.jsx)("div",{className:"d-flex justify-content-center",children:(0,p.jsx)("button",{className:"rounded-pill bg-prim p-2  w-auto",type:"submit",children:w?(0,p.jsx)("i",{className:"fa fa-spinner fa-spin"}):"Add address"})})]})})]})})]})}}}]);
//# sourceMappingURL=165.f14afad2.chunk.js.map