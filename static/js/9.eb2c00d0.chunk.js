/*! For license information please see 9.eb2c00d0.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunksession=self.webpackChunksession||[]).push([[9],{9597:function(e,t,r){var n=r(1413),s=(r(2791),r(8175)),a=r(184);t.Z=function(e){return(0,a.jsxs)(s.ZP,(0,n.Z)((0,n.Z)({speed:2,width:376,height:124,viewBox:"0 0 476 124",backgroundColor:"#d2d0d0",foregroundColor:"#f3f2f2"},e),{},{children:[(0,a.jsx)("rect",{x:"48",y:"8",rx:"3",ry:"3",width:"88",height:"6"}),(0,a.jsx)("rect",{x:"48",y:"26",rx:"3",ry:"3",width:"52",height:"6"}),(0,a.jsx)("rect",{x:"0",y:"56",rx:"3",ry:"3",width:"310",height:"6"}),(0,a.jsx)("rect",{x:"0",y:"72",rx:"3",ry:"3",width:"280",height:"6"}),(0,a.jsx)("rect",{x:"0",y:"88",rx:"3",ry:"3",width:"178",height:"6"}),(0,a.jsx)("circle",{cx:"20",cy:"20",r:"20"}),(0,a.jsx)("rect",{x:"27",y:"27",rx:"0",ry:"0",width:"1",height:"0"})]}))}},6009:function(e,t,r){r.r(t),r.d(t,{default:function(){return f}});var n=r(4165),s=r(5861),a=r(9439),i=r(2791),o=r(9190),l=(r(5218),r(7689)),c=r(1087),d={yellowGreen:"Payment_yellowGreen__Eon4Y",blueInput:"Payment_blueInput__LieWs",radioLabel:"Payment_radioLabel__ikV1e"},u=r(1243),h=r(9597),m=r(4270),p=r(184);function f(){var e,t,r=(0,l.s0)(),f=(0,i.useContext)(o.o),x=f.getLoggedUserCart,g=f.setCounter,v=f.headers,y=f.handleBaseUrl,j=f.baseUrl,b=(0,i.useState)(null),N=(0,a.Z)(b,2),w=N[0],E=N[1],C=(0,i.useState)(),Z=(0,a.Z)(C,2),k=Z[0],P=Z[1],S=(0,i.useState)(!1),O=(0,a.Z)(S,2),_=O[0],I=O[1],L=(0,i.useState)(!1),G=(0,a.Z)(L,2),U=G[0],R=G[1],T=localStorage.getItem("cartId"),B=null===k||void 0===k?void 0:k.find((function(e){return e._id===localStorage.getItem("addressId")}));function M(){return(M=(0,s.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),e.next=3,u.Z.post("".concat(j,"/api/v1/orders/").concat(T),{shippingAddress:{details:null===B||void 0===B?void 0:B.details,phone:null===B||void 0===B?void 0:B.phone,city:null===B||void 0===B?void 0:B.city}},{headers:v}).catch((function(e){return console.log("Cash order err",e)}));case 3:e.sent,r("/userProfile"),I(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=(0,s.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.next=3,u.Z.post("".concat(j,"/api/v1/orders/checkout-session/").concat(T,"?url=https://mouhanadahmed.github.io/E-Commerce/%23"),{shippingAddress:{details:null===B||void 0===B?void 0:B.details,phone:null===B||void 0===B?void 0:B.phone,city:null===B||void 0===B?void 0:B.city}},{headers:v}).catch((function(e){return console.log("Cash order err",e)}));case 3:t=e.sent,R(!1),r("/userProfile"),window.open(t.data.session.url);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=(0,s.Z)((0,n.Z)().mark((function e(){var t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("".concat(j,"/api/v1/addresses"),{headers:v}).catch((function(e){console.log("getLoggedUserAddress Error",e.code),"ERR_NETWORK"===e.code&&y(j)}));case 2:t=e.sent,r=t.data,P(r.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){var e=null===k||void 0===k?void 0:k.find((function(e){return e._id===localStorage.getItem("addressId")}));return null===e||void 0===e?void 0:e.details}function D(){return(D=(0,s.Z)((0,n.Z)().mark((function e(){var t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:"success"===(null===(r=e.sent)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.status)&&(E(r.data.data),g(r.data.data.products.length));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,i.useEffect)((function(){!function(){D.apply(this,arguments)}(),function(){A.apply(this,arguments)}()}),[]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(m.q,{children:[(0,p.jsx)("meta",{charSet:"utf-8"}),(0,p.jsx)("title",{children:"Payment"})]}),(0,p.jsx)("div",{className:"container",children:(0,p.jsxs)("div",{className:"row py-3",children:[(0,p.jsxs)("div",{className:"col-sm-7 order-2 order-sm-1 col-12",children:[(0,p.jsx)("h3",{className:"fw-bold mb-3",children:"Sopas"}),(0,p.jsxs)("h6",{className:"mb-5",children:[(0,p.jsxs)("span",{className:"text-main",children:["information ",(0,p.jsx)("i",{className:"fa-solid fa-angle-right"}),"  Shipping ",(0,p.jsx)("i",{className:"fa-solid fa-angle-right"})," "]}),"Payment"]}),(0,p.jsxs)("div",{className:"rounded border mb-5",children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between p-3",children:[(0,p.jsx)("h6",{className:" text-muted",children:"Contact "}),(0,p.jsx)("h6",{children:localStorage.getItem("userMail")})]}),(0,p.jsx)("hr",{className:"my-0"}),(0,p.jsxs)("div",{className:"d-flex justify-content-between p-3",children:[(0,p.jsx)("h6",{className:" text-muted",children:"Ship to  "}),(0,p.jsx)("h6",{children:K()?K():(0,p.jsx)("i",{className:"fa fa-spinner fa-spin"})})]})]}),(0,p.jsx)("h6",{className:"mb-5",children:" Payment method"}),(0,p.jsxs)("div",{className:"rounded border mb-5",children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-3",children:[(0,p.jsx)("h6",{className:" text-muted",children:"Cash on delivery "}),(0,p.jsx)("button",{className:"rounded-pill bg-prim p-2  w-auto",type:"submit",onClick:function(){return function(){return M.apply(this,arguments)}()},children:_?(0,p.jsx)("i",{className:"fa fa-spinner fa-spin"}):"Confirm"})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-3",children:[(0,p.jsx)("h6",{className:" text-muted",children:"Credit Card  "}),(0,p.jsx)("button",{className:"rounded-pill bg-prim  p-2 w-auto",type:"submit",onClick:function(){!function(){q.apply(this,arguments)}()},children:U?(0,p.jsx)("i",{className:"fa fa-spinner p-1 fa-spin"}):"Proceed to payment"})]})]}),(0,p.jsxs)(c.rU,{to:"/shipping",className:"text-main",children:[(0,p.jsx)("i",{className:"fa-solid fa-angle-left"}),"Return to shipping"]})]}),(0,p.jsxs)("div",{className:"col-sm-5 ".concat(d.yellowGreen," rounded order-sm-2 order-1 col-12 mb-5"),children:[(0,p.jsx)("h3",{className:"fw-bold pt-2 mb-3",children:"Checkout cart"}),w?null===w||void 0===w||null===(e=w.products)||void 0===e?void 0:e.map((function(e){return(0,p.jsxs)(c.rU,{to:"/product-details/".concat(e.product._id),className:"row  align-items-center border-bottom py-2",children:[(0,p.jsx)("div",{className:"col-2",children:(0,p.jsx)("img",{src:e.product.imageCover,className:"w-100  rounded-2",alt:e.product.title})}),(0,p.jsxs)("div",{className:"col-10  row ",children:[(0,p.jsxs)("div",{className:"col-9  pt-2",children:[(0,p.jsx)("h6",{className:"h6  fw-bold",children:e.product.title}),(0,p.jsx)("h6",{className:"mb-3  text-muted",children:e.product.brand.name})]}),(0,p.jsx)("div",{className:"text-end col-3 pt-2",children:(0,p.jsxs)("h6",{className:"fw-bold",children:["EGP ",e.price.toLocaleString()]})})]})]},e.product._id)})):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(h.Z,{}),(0,p.jsx)(h.Z,{}),(0,p.jsx)(h.Z,{})," "]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between pt-3 mb-3",children:[(0,p.jsx)("h6",{className:"h3   ",children:"Subtotal "}),(0,p.jsxs)("h6",{className:"h3   ",children:[" ",w?null===w||void 0===w||null===(t=w.totalCartPrice)||void 0===t?void 0:t.toLocaleString():(0,p.jsx)("i",{className:"fa fa-spinner fa-spin"})," EGP"]})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between border-bottom mb-3",children:[(0,p.jsx)("h6",{className:"h3   ",children:"Shipping "}),(0,p.jsxs)("h6",{className:"h3   ",children:[localStorage.getItem("shipping")," EGP "]})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between pt-3 mb-3",children:[(0,p.jsx)("h6",{className:"h3  fw-bold ",children:"Total "}),(0,p.jsxs)("h6",{className:"h3  fw-bold ",children:[" ",w?(Number(null===w||void 0===w?void 0:w.totalCartPrice)+Number(localStorage.getItem("shipping"))).toLocaleString():(0,p.jsx)("i",{className:"fa fa-spinner fa-spin"})," EGP"]})]})]})]})})]})}},8175:function(e,t,r){var n=r(2791),s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},s.apply(this,arguments)};var a=function(e){var t=e.animate,r=void 0===t||t,a=e.animateBegin,i=e.backgroundColor,o=void 0===i?"#f5f6f7":i,l=e.backgroundOpacity,c=void 0===l?1:l,d=e.baseUrl,u=void 0===d?"":d,h=e.children,m=e.foregroundColor,p=void 0===m?"#eee":m,f=e.foregroundOpacity,x=void 0===f?1:f,g=e.gradientRatio,v=void 0===g?2:g,y=e.gradientDirection,j=void 0===y?"left-right":y,b=e.uniqueKey,N=e.interval,w=void 0===N?.25:N,E=e.rtl,C=void 0!==E&&E,Z=e.speed,k=void 0===Z?1.2:Z,P=e.style,S=void 0===P?{}:P,O=e.title,_=void 0===O?"Loading...":O,I=e.beforeMask,L=void 0===I?null:I,G=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["animate","animateBegin","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","gradientDirection","uniqueKey","interval","rtl","speed","style","title","beforeMask"]),U=b||Math.random().toString(36).substring(6),R=U+"-diff",T=U+"-animated-diff",B=U+"-aria",M=C?{transform:"scaleX(-1)"}:null,q="0; "+w+"; 1",A=k+"s",K="top-bottom"===j?"rotate(90)":void 0;return(0,n.createElement)("svg",s({"aria-labelledby":B,role:"img",style:s(s({},S),M)},G),_?(0,n.createElement)("title",{id:B},_):null,L&&(0,n.isValidElement)(L)?L:null,(0,n.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+u+"#"+R+")",style:{fill:"url("+u+"#"+T+")"}}),(0,n.createElement)("defs",null,(0,n.createElement)("clipPath",{id:R},h),(0,n.createElement)("linearGradient",{id:T,gradientTransform:K},(0,n.createElement)("stop",{offset:"0%",stopColor:o,stopOpacity:c},r&&(0,n.createElement)("animate",{attributeName:"offset",values:-v+"; "+-v+"; 1",keyTimes:q,dur:A,repeatCount:"indefinite",begin:a})),(0,n.createElement)("stop",{offset:"50%",stopColor:p,stopOpacity:x},r&&(0,n.createElement)("animate",{attributeName:"offset",values:-v/2+"; "+-v/2+"; "+(1+v/2),keyTimes:q,dur:A,repeatCount:"indefinite",begin:a})),(0,n.createElement)("stop",{offset:"100%",stopColor:o,stopOpacity:c},r&&(0,n.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+v),keyTimes:q,dur:A,repeatCount:"indefinite",begin:a})))))},i=function(e){return e.children?(0,n.createElement)(a,s({},e)):(0,n.createElement)(o,s({},e))},o=function(e){return(0,n.createElement)(i,s({viewBox:"0 0 476 124"},e),(0,n.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),(0,n.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),(0,n.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),(0,n.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),(0,n.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),(0,n.createElement)("circle",{cx:"20",cy:"20",r:"20"}))};t.ZP=i}}]);
//# sourceMappingURL=9.eb2c00d0.chunk.js.map